<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css"
>
{% style %}
  [data-review-quote-slider-target] p {
    margin: 0;
    text-align: center;
  }
  [data-review-quote-slider-target] .swiper {
    padding-bottom: 60px;
    --swiper-pagination-color: {{ section.settings.pagination_color }};
    --swiper-pagination-bullet-inactive-color: {{ section.settings.pagination_color }};
    color: {{ section.settings.text_color }};
    font-size: {{ section.settings.font_size }}px;
  }
  [data-review-quote-slider-target] .custom-swiper-container {
    background-color: {{ section.settings.bg_color }};
    border-radius: {{ section.settings.border_radius }}px;
    padding: 3rem 3rem 1.5rem;
  }

  
.swiper-container {
    position:relative;
    width: 90vw;
    height: 300px;
}
.swiper-container > .swiper-slide__content {
  position:absolute;
  top:0;
}

.swiper-slide {
  height: 300px;
  display:flex;
  background: #eee;
  align-items: center;
  justify-content:center;
  transition:all 200ms linear;
  transform: scale(0.8);
  
  &.swiper-slide-active{
    transform: scale(1);
    background: #fc0
  }
}
.swiper-slide__content {
  height: 300px;
}

{% endstyle %}

<script
  defer
  src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js"
></script>

<script>
 $(document).ready(function() {
  // Assign some jquery elements we'll need
  var $swiper = $(".swiper-container");
  var $bottomSlide = null; // Slide whose content gets 'extracted' and placed
  // into a fixed position for animation purposes
  var $bottomSlideContent = null; // Slide content that gets passed between the
  // panning slide stack and the position 'behind'
  // the stack, needed for correct animation style

  var mySwiper = new Swiper(".swiper-container", {
    spaceBetween: 1,
    slidesPerView: 3,
    centeredSlides: true,
    roundLengths: true,
    loop: true,
    loopAdditionalSlides: 30,
    navigation: {
      nextEl: ".swiper-button-next",
      prevEl: ".swiper-button-prev"
    }
  });
});

</script>

{%- comment -%}
  Add this to target location:
  <div data-review-quote-slider-target></div>
{%- endcomment -%}

<template data-review-quote-slider>
  <div class="custom-swiper-container {{ section.settings.custom_classes }}">
    <div class="swiper">
      <div class="swiper-wrapper">
        {% for block in section.blocks %}
          <div class="swiper-slide">
            {{ block.settings.quote }}
          </div>
        {% endfor %}
      </div>

      <div class="swiper-pagination"></div>
    </div>
  </div>
</template>

{% schema %}
{
  "name": "SS - Review Slider",
  "settings": [
    {
      "type": "textarea",
      "id": "example",
      "label": "Target example",
      "default": "<div data-review-quote-slider-target><\/div>",
      "info": "Copy this code into the target area you want to display the slider."
    },
    {
      "type": "color",
      "id": "pagination_color",
      "label": "Pagination Color",
      "default": "#db877b"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background color",
      "default": "#f4d9d5"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#d87e71"
    },
    {
      "type": "range",
      "id": "border_radius",
      "label": "Border radius",
      "unit": "px",
      "min": 0,
      "max": 99,
      "step": 1,
      "default": 32
    },
    {
      "type": "range",
      "id": "font_size",
      "label": "Font size",
      "unit": "px",
      "min": 8,
      "max": 40,
      "step": 1,
      "default": 16
    },
    {
      "type": "text",
      "id": "custom_classes",
      "label": "Custom classes"
    }
  ],
  "blocks": [
    {
      "type": "quote",
      "name": "Quote",
      "settings": [
        {
          "type": "richtext",
          "id": "quote",
          "label": "Review Quote",
          "info": "Enter the review quote here."
        }
      ]
    }
  ],
  "presets": [
    {
      "category": "Reviews",
      "name": "SS - Review slider",
      "blocks": [
        {
          "type": "quote",
          "settings": {
            "quote": "<p>\"<\/p><p>This rug is such good quality and makes me so happy every time I look at it.  I'm using this one for a top cover over my bedspread. It's a perfect  match for my room and linen. I have another that I use as a throw  for the lounge and a picnic rug! In LOVE.<\/p><p>- Barbara W.<\/p>"
          }
        },
        {
          "type": "quote",
          "settings": {
            "quote": "<p>\"<\/p><p>The postage was incredibly quick and the quality and colours far exceeded what I thought. The pics don't do them justice. Truly unique rugs that I doubt will date anytime soon. I would recommend - beautiful rug and great customer service. <\/p><p>- Tanya E.<\/p>"
          }
        },
        {
          "type": "quote",
          "settings": {
            "quote": "<p>\"<\/p><p>My husband argued with me saying we didn’t need a new blanket. Once we received this one, he quickly changed his tune. It’s cozy, soft and warm. I love the design and boho vibe it adds to our home. High quality product at an affordable price.<\/p><p>- Bebe H.<\/p>"
          }
        }
      ]
    }
  ]
}
{% endschema %}
